import { useRef, useState, useEffect } from 'react';

const Logo = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width={40} viewBox="0 0 200 165">
    <defs>
      <linearGradient id="glassGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="rgba(255, 255, 255, 0.3)" />
        <stop offset="40%" stop-color="rgba(255, 255, 255, 0.5)" />
        <stop offset="100%" stop-color="rgba(255, 255, 255, 0.1)" />
      </linearGradient>
      <linearGradient id="colorGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#00FFFF" />
        <stop offset="100%" stop-color="#FF00FF" />
      </linearGradient>
    </defs>
    <path
      d="M 17.667 13.667 C 17.300 14.033, 17 22.430, 17 32.326 L 17 50.319 11.625 55.954 C 6.449 61.381, 1.960 68.522, 2.037 71.210 C 2.057 71.920, 3.258 70.049, 4.707 67.053 C 6.155 64.057, 9.720 59.149, 12.629 56.146 L 17.919 50.685 18.209 31.841 C 18.369 21.477, 18.462 12.998, 18.417 12.999 C 18.371 13, 18.033 13.300, 17.667 13.667 M 63 14.016 C 74.571 16.487, 85.104 24.398, 90.937 35 C 92.602 38.025, 93.968 40.050, 93.973 39.500 C 93.991 37.349, 88.002 28.281, 83.862 24.193 C 78.584 18.981, 68.820 13.984, 62.868 13.448 L 58.500 13.055 63 14.016 M 110.529 27.971 C 100.432 38.085, 95.331 42.546, 94.807 41.721 C 94.268 40.874, 94.026 41.035, 94.015 42.250 C 94.007 43.212, 94.320 44, 94.711 44 C 95.102 44, 102.446 37.025, 111.031 28.500 C 119.617 19.975, 126.379 13, 126.058 13 C 125.737 13, 118.749 19.737, 110.529 27.971 M 153.552 14.275 C 153.830 14.999, 143.747 25.747, 130.271 39.094 C 110.690 58.488, 105.774 62.846, 102.384 63.819 C 100.120 64.468, 93.052 65, 86.676 65 L 75.084 65 74.743 57.250 L 74.402 49.500 74.201 57.750 L 74 66 86.134 66 C 92.808 66, 100.120 65.469, 102.384 64.819 C 105.780 63.845, 110.744 59.434, 130.750 39.615 C 152.748 17.822, 156.966 13, 154.031 13 C 153.499 13, 153.283 13.574, 153.552 14.275 M 140.993 40.612 C 118.062 63.642, 112.504 68.708, 107.500 71.140 C 104.200 72.744, 102.625 73.761, 104 73.400 C 110.905 71.586, 116 67.272, 142.397 40.886 C 157.740 25.549, 169.887 13, 169.390 13 C 168.893 13, 156.114 25.425, 140.993 40.612 M 197 14.255 C 197 14.946, 181.475 31.031, 162.500 50 L 128 84.489 162.391 118.995 C 181.306 137.973, 197.020 154.175, 197.312 155 C 197.763 156.277, 197.854 156.265, 197.921 154.917 C 197.964 154.046, 182.460 137.849, 163.466 118.923 L 128.932 84.512 163.216 50.335 C 193.129 20.516, 200.045 13, 197.573 13 C 197.258 13, 197 13.565, 197 14.255 M 43.398 35.405 C 43.102 36.177, 43.003 38.315, 43.180 40.155 L 43.500 43.500 51.874 44.044 C 59.447 44.536, 60.476 44.852, 62.624 47.350 C 63.931 48.869, 65 49.715, 65 49.230 C 65 48.745, 63.841 47.259, 62.424 45.928 C 60.238 43.875, 58.645 43.453, 51.924 43.148 L 44 42.788 44 38.938 L 44 35.088 51.250 34.743 L 58.500 34.397 51.219 34.199 C 45.749 34.049, 43.803 34.350, 43.398 35.405 M 60 35.716 C 60.825 36.023, 62.737 36.899, 64.250 37.663 C 65.763 38.427, 67 38.826, 67 38.551 C 67 37.766, 61.245 34.991, 59.800 35.079 C 58.927 35.132, 58.992 35.341, 60 35.716 M 68 40 C 68 40.550, 68.477 41, 69.059 41 C 69.641 41, 69.840 40.550, 69.500 40 C 69.160 39.450, 68.684 39, 68.441 39 C 68.198 39, 68 39.450, 68 40 M 71.695 45.487 C 72.610 47.406, 73.536 48.797, 73.753 48.580 C 74.210 48.123, 71.175 42, 70.490 42 C 70.239 42, 70.781 43.569, 71.695 45.487 M 65 57.972 L 65 64.944 51.250 65.252 L 37.500 65.561 51.750 65.781 L 66 66 66 58.500 C 66 54.375, 65.775 51, 65.500 51 C 65.225 51, 65 54.137, 65 57.972 M 33 67 C 31.667 67.862, 31.667 67.969, 33 67.969 C 33.825 67.969, 35.175 67.533, 36 67 C 37.333 66.138, 37.333 66.031, 36 66.031 C 35.175 66.031, 33.825 66.467, 33 67 M 27.243 71.265 C 23.846 74.787, 21.939 78.889, 22.107 82.315 C 22.166 83.517, 22.641 82.593, 23.164 80.261 C 23.732 77.723, 25.500 74.552, 27.570 72.357 C 29.471 70.342, 30.877 68.544, 30.695 68.361 C 30.512 68.179, 28.959 69.486, 27.243 71.265 M 1.079 74.583 C 1.127 75.748, 1.364 75.985, 1.683 75.188 C 1.972 74.466, 1.936 73.603, 1.604 73.271 C 1.272 72.939, 1.036 73.529, 1.079 74.583 M 34.106 76.901 C 32.398 78.497, 31.018 80.409, 31.040 81.151 C 31.062 81.893, 31.723 81.316, 32.510 79.869 C 33.296 78.421, 34.741 76.846, 35.720 76.369 C 36.699 75.891, 51.675 75.263, 69 74.972 L 100.500 74.445 68.856 74.222 L 37.212 74 34.106 76.901 M 0.156 83.500 C 0 91.035, 2.184 102.150, 3.552 100.782 C 3.829 100.504, 3.536 98.977, 2.899 97.389 C 2.263 95.800, 1.419 90.450, 1.022 85.500 L 0.301 76.500 0.156 83.500 M 65 87.500 L 65 94 52.047 94 C 37.532 94, 34.402 93.128, 32.396 88.524 C 31.510 86.491, 31.065 86.106, 31.039 87.349 C 31.018 88.366, 32.398 90.503, 34.106 92.099 L 37.212 95 51.606 95 L 66 95 66 88.560 L 66 82.121 69.750 81.728 L 73.500 81.336 69.250 81.168 L 65 81 65 87.500 M 74.415 100 C 74.415 110.175, 74.564 114.337, 74.745 109.250 C 74.927 104.162, 74.927 95.837, 74.745 90.750 C 74.564 85.662, 74.415 89.825, 74.415 100 M 22.107 86.782 C 21.945 90.226, 24.384 95.153, 27.877 98.437 C 32.065 102.376, 31.854 101.186, 27.557 96.629 C 25.499 94.447, 23.731 91.272, 23.164 88.739 C 22.625 86.336, 22.168 85.489, 22.107 86.782 M 84.015 95.750 C 84.026 96.941, 84.275 97.116, 84.794 96.298 C 85.241 95.596, 88.663 94.951, 93.029 94.747 L 100.500 94.397 92.250 94.199 C 84.979 94.024, 84.002 94.208, 84.015 95.750 M 107.500 97.860 C 112.504 100.292, 118.062 105.358, 140.993 128.388 C 156.114 143.575, 169.164 155.993, 169.993 155.985 C 171.167 155.973, 171.213 155.787, 170.203 155.147 C 169.490 154.694, 156.665 142.164, 141.703 127.303 C 116.140 101.911, 110.740 97.370, 104 95.600 C 102.625 95.239, 104.200 96.256, 107.500 97.860 M 85.404 101 C 85.496 103.401, 85.816 103.522, 93.500 104.058 C 98.860 104.431, 102.820 105.316, 105.500 106.739 C 110.653 109.474, 154.496 153.389, 153.570 154.887 C 153.191 155.499, 153.359 156, 153.941 156 C 156.975 156, 152.932 151.361, 130.750 129.385 C 104.187 103.070, 104.085 103, 92.200 103 C 86.697 103, 86.094 102.791, 85.720 100.750 C 85.361 98.792, 85.320 98.825, 85.404 101 M 33 102 C 33.825 102.533, 35.175 102.969, 36 102.969 C 37.333 102.969, 37.333 102.862, 36 102 C 35.175 101.467, 33.825 101.031, 33 101.031 C 31.667 101.031, 31.667 101.138, 33 102 M 51.207 103.747 L 64.914 104.056 65.258 111.278 L 65.603 118.500 65.801 110.750 L 66 103 51.750 103.219 L 37.500 103.439 51.207 103.747 M 5.052 104.713 C 5.024 105.381, 7.700 108.813, 11 112.341 L 17 118.755 17 136.818 C 17 146.753, 17.338 155.091, 17.750 155.347 C 18.163 155.603, 18.369 147.350, 18.209 137.008 L 17.918 118.203 13.171 113.352 C 10.560 110.683, 7.678 107.375, 6.765 106 C 5.852 104.625, 5.081 104.046, 5.052 104.713 M 62.386 121.847 C 60.509 124.122, 59.327 124.472, 51.886 124.955 L 43.500 125.500 43.500 130 L 43.500 134.500 51 134.576 L 58.500 134.651 51.250 134.282 L 44 133.912 44 130.062 L 44 126.212 51.984 125.849 C 59.084 125.527, 60.268 125.186, 62.681 122.774 C 64.173 121.281, 65.193 119.886, 64.947 119.672 C 64.701 119.458, 63.549 120.437, 62.386 121.847 M 71.695 123.513 C 70.781 125.431, 70.239 127, 70.490 127 C 71.175 127, 74.210 120.877, 73.753 120.420 C 73.536 120.203, 72.610 121.594, 71.695 123.513 M 94.015 126.750 C 94.026 127.965, 94.268 128.126, 94.807 127.279 C 95.331 126.454, 100.432 130.915, 110.529 141.029 C 118.749 149.263, 125.737 156, 126.058 156 C 126.379 156, 119.617 149.025, 111.031 140.500 C 102.446 131.975, 95.102 125, 94.711 125 C 94.320 125, 94.007 125.787, 94.015 126.750 M 68 129.059 C 68 129.641, 68.450 129.840, 69 129.500 C 69.550 129.160, 70 128.684, 70 128.441 C 70 128.198, 69.550 128, 69 128 C 68.450 128, 68 128.477, 68 129.059 M 90.626 134.516 C 85.226 144.830, 73.470 153.168, 61.643 155.073 L 56.500 155.901 61.726 155.600 C 68.628 155.202, 78.692 150.208, 84.373 144.363 C 88.438 140.181, 94.685 130.352, 93.825 129.492 C 93.620 129.287, 92.180 131.547, 90.626 134.516 M 62.500 132.055 C 60.300 133.096, 59.085 133.959, 59.800 133.974 C 61.255 134.003, 67 131.211, 67 130.474 C 67 129.889, 67.296 129.785, 62.500 132.055"
      fill="url(#colorGradient)"
    />
    <path
      d="M 18.667 13.667 C 18.300 14.033, 18 22.493, 18 32.467 L 18 50.601 12.662 56.112 C 5.158 63.859, 1.771 71.395, 1.211 81.591 C 0.483 94.833, 4.917 106.175, 14.048 114.425 L 17.956 117.955 18.228 136.727 L 18.500 155.500 35.949 155.774 C 63.536 156.208, 72.731 154.008, 82.836 144.557 C 87.619 140.083, 94 129.825, 94 126.610 C 94 125.725, 94.320 125, 94.711 125 C 95.102 125, 102.446 131.975, 111.031 140.500 L 126.641 156 139.762 156 C 148.317 156, 153.121 155.613, 153.570 154.887 C 153.972 154.235, 144.981 144.451, 131.879 131.283 C 106.468 105.745, 104 104.026, 92.719 104.010 C 85.431 103.999, 85.594 104.126, 84.510 97.628 L 83.864 93.755 93.182 94.175 C 108.788 94.878, 109.728 95.519, 141.570 127.160 C 156.605 142.100, 169.490 154.694, 170.203 155.147 C 172.428 156.558, 197 156.199, 197 154.755 C 197 154.071, 181.475 137.981, 162.500 119 L 128 84.489 162.500 50 C 181.475 31.031, 197 14.946, 197 14.255 C 197 13.311, 193.694 13, 183.647 13 L 170.294 13 142.393 40.943 C 118.670 64.702, 113.595 69.305, 108.496 71.693 L 102.500 74.500 70 75 C 47.202 75.351, 36.869 75.862, 35.387 76.712 C 32.022 78.642, 30.580 83.197, 31.986 87.459 C 33.827 93.036, 36.768 94, 51.950 94 L 65 94 65 87.500 L 65 81 68.750 81.015 C 75.294 81.042, 75.195 80.704, 74.830 101.608 C 74.516 119.599, 74.381 120.707, 72.011 124.848 C 70.476 127.529, 67.797 130.207, 65.025 131.831 C 61.130 134.114, 59.391 134.468, 52.014 134.483 L 43.500 134.500 43.500 130 L 43.500 125.500 51.874 124.956 C 59.447 124.464, 60.476 124.148, 62.624 121.650 C 64.665 119.278, 65 117.839, 65 111.444 L 65 104 52.250 103.994 C 37.435 103.988, 33.292 103.073, 28.324 98.711 C 23.912 94.838, 22 90.540, 22 84.500 C 22 78.460, 23.912 74.162, 28.324 70.289 C 33.292 65.927, 37.435 65.012, 52.250 65.006 L 65 65 65 57.556 C 65 51.161, 64.665 49.722, 62.624 47.350 C 60.476 44.852, 59.447 44.536, 51.874 44.044 L 43.500 43.500 43.500 39 L 43.500 34.500 52.014 34.517 C 59.457 34.532, 61.113 34.876, 65.168 37.252 C 71.785 41.131, 75 47.815, 75 57.696 L 75 65 86.634 65 C 93.033 65, 100.120 64.469, 102.384 63.821 C 105.778 62.848, 110.689 58.490, 130.395 38.960 C 144.838 24.648, 154.012 14.828, 153.586 14.140 C 153.117 13.380, 148.501 13, 139.762 13 L 126.641 13 111.031 28.500 C 102.446 37.025, 95.102 44, 94.711 44 C 94.320 44, 94 43.275, 94 42.390 C 94 39.175, 87.619 28.917, 82.836 24.443 C 77.259 19.227, 69.786 15.477, 62.040 14.008 C 56.168 12.894, 19.726 12.608, 18.667 13.667"
      fill="url(#glassGradient)"
    />
  </svg>
);

const Notch = () => {
  const notchRef = useRef<HTMLDivElement>(null);
  const [isOpen, setIsOpen] = useState(false);
  const [width, setWidth] = useState<string>('7rem');

  const resizeNotch = () => {
    const notch = notchRef.current;
    if (notch) {
      const contentWidth = notch.scrollWidth;
      setWidth(isOpen ? `${contentWidth}px` : '7rem');
    }
  };

  useEffect(() => {
    resizeNotch();
  }, [isOpen]);

  return (
        <div
        ref={notchRef}
        className="notch gradient-outline before:rounded-full"
        style={{ width }}
        onMouseEnter={() => setIsOpen(true)}
        onMouseLeave={() => setIsOpen(false)}
        >
            <div className="current-icon ps-3 transition-all">
                <svg width="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="silverGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#f5f5f5"/>
                    <stop offset="50%" stop-color="#cfcfcf"/>
                    <stop offset="100%" stop-color="#f5f5f5"/>
                    </linearGradient>
                </defs>
                <path 
                    d="M3 10.5651C3 9.9907 3 9.70352 3.07403 9.43905C3.1396 9.20478 3.24737 8.98444 3.39203 8.78886C3.55534 8.56806 3.78202 8.39175 4.23539 8.03912L11.0177 2.764C11.369 2.49075 11.5447 2.35412 11.7387 2.3016C11.9098 2.25526 12.0902 2.25526 12.2613 2.3016C12.4553 2.35412 12.631 2.49075 12.9823 2.764L19.7646 8.03913C20.218 8.39175 20.4447 8.56806 20.608 8.78886C20.7526 8.98444 20.8604 9.20478 20.926 9.43905C21 9.70352 21 9.9907 21 10.5651V17.8C21 18.9201 21 19.4801 20.782 19.908C20.5903 20.2843 20.2843 20.5903 19.908 20.782C19.4802 21 18.9201 21 17.8 21H6.2C5.07989 21 4.51984 21 4.09202 20.782C3.71569 20.5903 3.40973 20.2843 3.21799 19.908C3 19.4801 3 18.9201 3 17.8V10.5651Z"
                    fill="url(#silverGradient)"
                />
                </svg>
            </div>
            <div className="links flex items-center gap-6 museomoderno-400">
                <a href="#" className="text-white relative inline-block group">
                Home
                <span className="absolute left-0 bottom-0 h-0.5 bg-white transition-all w-0 group-hover:w-full"></span>
                </a>
                <a href="#" className="bg-gradient-to-b from-slate-500 to-slate-100 bg-clip-text text-transparent hover:text-white transition-all">
                Projects
                </a>
                <a href="#" className="relative inline-block text-transparent bg-clip-text bg-gradient-to-r from-white to-white
                before:absolute before:inset-0 before:bg-white/20 before:scale-x-0 before:origin-left before:transition-transform
                hover:before:scale-x-100">
                Skills
                </a>
                <a href="#" className="text-white transition-all hover:scale-105 hover:text-blue-400 hover:drop-shadow-md">
                Certificates
                </a>
                <a href="#" className="text-white inline-block transition-all hover:tracking-widest hover:-translate-y-1">
                About
                </a>
            </div>
        </div>
  );
}

const Navbar = () => (
  <>
    <nav className="py-5 px-5 flex z-50">
      <a
        href="#"
        className="gradient-outline relative p-5 aspect-square flex justify-center items-center rounded-full before:rounded-full backdrop-blur-xl shadow-[inset_1px_3px_4px_rgba(255,255,255,0.6)]"
      >
        <Logo />
      </a>
      <Notch />
    </nav>
  </>
);

export default Navbar;